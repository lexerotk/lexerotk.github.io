<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blocked</title>
    <link rel="shortcut icon" href="/assets/avatars/lexerotk.jpg" type="image/x-icon">
    <script defer src="https://cloud.umami.is/script.js" data-website-id="659fdca6-50a0-447d-9530-a5fc940e1935"></script>
</head>
<body>
    <div id="loading" style="background-color:black; position:absolute; top:0px; left:0px; width:100%; height:100%; z-index:2000; color: white;"></div>
    <div id="container">
        <section>
            <h1>Something is weird</h1>
            <span id="desc" class="pagenotice">Unusual connection detected. A VPN or Proxy can trigger this. And unfortunately I don't allow VPN connections to this website for security and privacy reasons.</span>
        </section>
        <section>
            <span class="pagenotice"><b><i>This check is only for detecting unusual connections. See the source code: <u><a href="http://github.com/lexerotk/lexerotk.github.io" target="_blank">lexerotk.github.io</a></u>, <u><a href="https://github.com/lexerotk/proxy-detection" target="_blank">proxy-detection</a></u></i></b></span>
        </section>
    </div>

    <script>
        function getQueryParam(name) {
        const params = new URLSearchParams(window.location.search);
        return params.get(name) || "false";
        }
        const browserError = getQueryParam("browserError");

        if (browserError == "true") {
            document.getElementById("desc").innerHTML = 'Security check has been <b>failed</b> due your browser privacy settings or an extension blocking the APIs. Please disable them for this website to continue.'
        }
//         async function getWebRTCIP() {
//             return new Promise((resolve) => {
//             const rtc = new RTCPeerConnection({
//             iceServers: [{ urls: "stun:stun.l.google.com:19302" }]
//         });

//         rtc.createDataChannel("check");
//         rtc.createOffer()
//             .then(offer => rtc.setLocalDescription(offer))
//             .catch(err => reject(err));

//         rtc.onicecandidate = event => {
//             if (event && event.candidate && event.candidate.candidate) {
//                 const ipRegex = /([0-9]{1,3}(\.[0-9]{1,3}){3})/;
//                 const ipMatch = event.candidate.candidate.match(ipRegex);
//                 if (ipMatch) {
//                     resolve(ipMatch[1]);
//                     rtc.onicecandidate = null;
//                 }
//             }
//         };

//         setTimeout(() => {
//             resolve("Browser Privacy Protection Error");
//         }, 4000);
//     });
// }
// async function showResult() {
//     const webrtcIP = await getWebRTCIP()
// } ;

    </script>
    <script src="/script/main.js"></script>
</body>
</html>
